    <!DOCTYPE html>
    <html lang="zh-CN">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Gemini Status</title>
        <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                background: #f5f5f7;
                color: #1d1d1f;
                min-height: 100vh;
                padding: 20px;
            }
            .container { max-width: 1200px; margin: 0 auto; }
            h1 {
                font-size: 24px;
                font-weight: 600;
                margin-bottom: 8px;
                color: #1d1d1f;
            }
            .subtitle { color: #86868b; font-size: 14px; margin-bottom: 24px; }
            .update-time { color: #86868b; font-size: 12px; margin-bottom: 16px; }
            .grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }
            .card {
                background: #fff;
                border: 1px solid #e5e5e5;
                border-radius: 12px;
                padding: 16px;
                box-shadow: 0 1px 3px rgba(0,0,0,0.04);
            }
            .card:hover { border-color: #d4d4d4; }
            .card-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 12px;
            }
            .service-name { font-weight: 600; font-size: 14px; color: #1d1d1f; }
            .status-badge {
                padding: 2px 8px;
                border-radius: 12px;
                font-size: 11px;
                font-weight: 600;
            }
            .status-up { background: #d1fae5; color: #065f46; }
            .status-down { background: #fee2e2; color: #991b1b; }
            .status-unknown { background: #f3f4f6; color: #6b7280; }
            .stats {
                display: flex;
                gap: 16px;
                margin-bottom: 12px;
                font-size: 12px;
                color: #86868b;
            }
            .stat-value { color: #1d1d1f; font-weight: 600; }
            .heartbeat-bar {
                display: flex;
                gap: 2px;
                height: 24px;
                align-items: flex-end;
            }
            .beat {
                flex: 1;
                min-width: 4px;
                max-width: 8px;
                border-radius: 2px;
                transition: all 0.2s;
                position: relative;
            }
            .beat:hover { opacity: 0.8; transform: scaleY(1.1); }
            .beat.up { background: #34c759; height: 100%; }
            .beat.down { background: #ff3b30; height: 100%; }
            .beat.empty { background: #e5e5ea; height: 40%; }
            .beat .tooltip {
                position: absolute;
                bottom: 100%;
                left: 50%;
                transform: translateX(-50%);
                background: #1d1d1f;
                color: #fff;
                padding: 6px 10px;
                border-radius: 6px;
                font-size: 11px;
                white-space: nowrap;
                opacity: 0;
                pointer-events: none;
                transition: opacity 0.15s;
                margin-bottom: 6px;
                z-index: 100;
            }
            .beat .tooltip::after {
                content: '';
                position: absolute;
                top: 100%;
                left: 50%;
                transform: translateX(-50%);
                border: 5px solid transparent;
                border-top-color: #1d1d1f;
            }
            .beat:hover .tooltip { opacity: 1; }
            @media (max-width: 768px) {
                .grid { grid-template-columns: 1fr; }
                .beat { min-width: 3px; max-width: 6px; }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>Gemini Status</h1>
            <p class="subtitle">服务状态监控</p>
            <p class="update-time" id="update-time">更新中...</p>
            <div class="grid" id="services"></div>
        </div>
        <script>
            async function loadStatus() {
                try {
                    const res = await fetch('/public/uptime');
                    const data = await res.json();
                    renderServices(data);
                    document.getElementById('update-time').textContent = '更新于 ' + data.updated_at;
                } catch (e) {
                    document.getElementById('services').innerHTML = '<div class="card">加载失败</div>';
                }
            }

            function renderServices(data) {
                const container = document.getElementById('services');
                let html = '';
                for (const [id, svc] of Object.entries(data.services)) {
                    const statusClass = svc.status === 'up' ? 'status-up' : svc.status === 'down' ? 'status-down' : 'status-unknown';
                    const statusText = svc.status === 'up' ? '正常' : svc.status === 'down' ? '故障' : '未知';

                    // 生成心跳条
                    let beats = '';
                    const maxBeats = 60;
                    const heartbeats = svc.heartbeats || [];
                    for (let i = 0; i < maxBeats; i++) {
                        if (i < heartbeats.length) {
                            const beat = heartbeats[i];
                            const status = beat.success ? '成功' : '失败';
                            beats += `<div class="beat ${beat.success ? 'up' : 'down'}"><span class="tooltip">${beat.time} · ${status}</span></div>`;
                        } else {
                            beats += '<div class="beat empty"></div>';
                        }
                    }

                    html += `
                        <div class="card">
                            <div class="card-header">
                                <span class="service-name">${svc.name}</span>
                                <span class="status-badge ${statusClass}">${statusText}</span>
                            </div>
                            <div class="stats">
                                <span>可用率 <span class="stat-value">${svc.uptime}%</span></span>
                                <span>请求 <span class="stat-value">${svc.total}</span></span>
                                <span>成功 <span class="stat-value">${svc.success}</span></span>
                            </div>
                            <div class="heartbeat-bar">${beats}</div>
                        </div>
                    `;
                }
                container.innerHTML = html;
            }

            loadStatus();
            setInterval(loadStatus, 5000);
        </script>
    </body>
    </html>